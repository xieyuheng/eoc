---
title: interpreter vs compiler
date: 2025-09-22
---

我之前一直认为写解释器是非常简单的项目，因为只是在做符号计算。
而相比之下，写编译器是分 messy 的项目，因为想到 x86 庞大的指令集，
还有操作系统的可执行文件格式，就感觉很复杂。

但是其实在写编译器的时候才发现，
其实除了最后生成可执行文件，或者生成汇编代码，
这类步骤以外，前面的步骤都还是纯粹的符号计算。
也就是说完全是在解释器写手的舒适区。

另外二进制格式也就是简单的保存信息而已，和 JSON 没有本质区别。

我们甚至可以发明通用的二进制格式描述文件，
直接利用文件格式的描述（类似 type 和 schema），
把二进制格式的文件解析成 JSON，
只不过需要扩展 JSON 的类型来支持 byte array。

比如 tael 作为 JSON 的 superset，
可以再增加一个 `(@hex)` literal syntax，
专门用来表示二进制数据，例如 `(@hex F1 A1 00)`，
也就是模仿 hex editor 用人类可读的方式表示二进制数据。
甚至可以一行 16 个 byte 并且给出行号，
就完全每模仿 hex editor。
